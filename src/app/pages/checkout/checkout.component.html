<!--=====================================
Checkout 
======================================--> 
<div class="ps-checkout ps-section--shopping" style="margin-top: 5%;">

    <div class="container">

        <div class="ps-section__header">

            <h3 style="font-family:'Libre Franklin', sans-serif;; font-size: 27px;
          font-weight: 450;">Checkout</h3>

        </div>

        <div class="ps-section__content">

            <form
            (ngSubmit)="onSubmit(f)"
            #f="ngForm" 
            class="ps-form--checkout">

                <div class="row">

                    <div class="col-xl-7 col-lg-8 col-sm-12">

                        <div class="ps-form__billing-info">

                            <h3 class="ps-form__heading"
                            style="font-family:'Libre Franklin', sans-serif; font-size: 27px;
                            font-weight: 450;"
                            >Billing Details</h3>

                            <div class="form-group">

                                <label style="font-family:'Libre Franklin', sans-serif; font-size: 20px;
                            font-weight: 20;">Name</label>

                                <div class="form-group__content">

                                    <input 
                                    class="form-control" 
                                    type="text"
                                    name="displayName"
                                    [(ngModel)]="user.displayName"
                                    readonly
                                    required>

                                </div>

                            </div>

                            <div class="form-group">

                                <label style="font-family:'Libre Franklin', sans-serif; font-size: 20px;
                            font-weight: 20;">Email Address</label>

                                <div class="form-group__content">

                                    <input 
                                    class="form-control" 
                                    type="email"
                                    name="email"
                                    [(ngModel)]="user.email"
                                    email
                                    readonly
                                    required>

                                </div>

                            </div>

                            <div class="form-group">

                                <label style="font-family:'Libre Franklin', sans-serif; font-size: 20px;
                            font-weight: 20;">Country<sup>*</sup></label>

                                <div class="form-group__content">

                                    <select 
                                    class="form-control" 
                                    name="country"
                                    [(ngModel)]="user.country"
                                    required
                                    #inputCountry
                                    (change)="changeCountry(inputCountry)"
                                    >
                                    <option
                                    style="font-family:'Libre Franklin', sans-serif;; font-size: 20px;
                                    font-weight: 20;"
                                    *ngFor="let country of countries"
                                    [value]="country.name">{{country.name}}</option>    


                                    </select>

                                    <div 
                                    style="font-family:'Libre Franklin', sans-serif; font-size: 20px;
                                    font-weight: 20;"
                                    *ngIf="f.submitted && f.controls['country'].errors"
                                    class="text-danger">Please fill out this field.</div>

                                </div>

                            </div>

                             <div class="form-group">

                                <label
                                style="font-family:'Libre Franklin', sans-serif; font-size: 20px;
                                font-weight: 20;">City<sup>*</sup></label>

                                <div class="form-group__content">

                                    <input 
                                    class="form-control" 
                                    type="text"
                                    name="city"
                                    [(ngModel)]="user.city"
                                    required
                                    #inputCity
                                    >

                                    <div style="font-family:'Libre Franklin', sans-serif; font-size: 20px;
                                    font-weight: 20;"
                                    *ngIf="f.submitted && f.controls['city'].errors"
                                    class="text-danger">Please fill out this field.</div>


                                </div>

                            </div>

                            <div class="form-group">

                                <label style="font-family:'Libre Franklin', sans-serif; font-size: 20px;
                                font-weight: 20;">Phone<sup>*</sup></label>

                                <div class="form-group__content input-group">

                                    <div class="input-group-append">
                                        <span class="input-group-text"
                                        style="font-family:'Libre Franklin', sans-serif; font-size: 20px;
                                         font-weight: 20;">{{dialCode}}</span>
                                    </div>

                                    <input 
                                    class="form-control" 
                                    type="text"
                                    name="phone"
                                    [(ngModel)]="user.phone"
                                    required
                                    #inputPhone
                                    >

                                    <div style="font-family:'Libre Franklin', sans-serif; font-size: 20px;
                                    font-weight: 20;"
                                    *ngIf="f.submitted && f.controls['phone'].errors"
                                    class="text-danger">Please fill out this field.</div>


                                </div>

                            </div>

                            <div class="form-group">

                                <label
                                style="font-family:'Libre Franklin', sans-serif; font-size: 20px;
                                font-weight: 20;">Address<sup>*</sup></label>

                                <div class="form-group__content">

                                    <input 
                                    class="form-control" 
                                    type="text"
                                    name="address"
                                    [(ngModel)]="user.address"
                                    required
                                    #inputAddress
                                    >

                                    <div style="font-family:'Libre Franklin', sans-serif; font-size: 20px;
                                    font-weight: 20;"
                                    *ngIf="f.submitted && f.controls['address'].errors"
                                    class="text-danger">Please fill out this field.</div>


                                </div>

                            </div>

                            <div class="form-group">

                                <div class="ps-checkbox">

                                    <input 
                                    class="form-control" 
                                    type="checkbox" 
                                    id="create-account"
                                    name="saveAddress"
                                    [(ngModel)]="saveAddress"
                                    #inputSaveAddress
                                    (change)="saveAddressFnc(inputCountry, inputCity, inputPhone, inputAddress, inputSaveAddress)">

                                    <label for="create-account"
                                    style="font-family:'Libre Franklin', sans-serif; font-size: 20px;
                                    font-weight: 20;">Save address?</label>

                                </div>

                            </div>

                            <h3 class="mt-40" style="font-family:'Libre Franklin', sans-serif; font-size: 27px;
                            font-weight: 450;"> Addition information</h3>

                            <div class="form-group">

                                <label style="font-family:'Libre Franklin', sans-serif; font-size: 20px;
                                    font-weight: 20;">Order Notes</label>

                                <div class="form-group__content">

                                    <textarea 
                                    class="form-control" 
                                    rows="7" 
                                    placeholder="Notes about your order, e.g. special notes for delivery."
                                    name="addInfo"
                                    [(ngModel)]="addInfo"></textarea>

                                </div>

                            </div>

                        </div>

                    </div>

                    <div class="col-xl-5 col-lg-4 col-sm-12">

                        <div class="ps-form__total">

                            <h3 class="ps-form__heading"
                            style="font-family:'Libre Franklin', sans-serif; font-size: 27px;
                            font-weight: 450;">Your Order</h3>

                            <div class="content">

                                <div class="ps-block--checkout-total">

                                    <div class="ps-block__header d-flex justify-content-between">

                                        <p style="font-family:'Libre Franklin', sans-serif;; font-size: 20px;
                                        font-weight: 20;">Product</p>

                                        <p style="font-family:'Libre Franklin', sans-serif;; font-size: 20px;
                                        font-weight: 20;">Total</p>

                                    </div>

                                    <div class="ps-block__content">

                                        <table class="table ps-block__products">

                                            <tbody>

                                                <tr
                                                *ngFor="let product of shoppingCart; let lastIndex = last"
                                                >

                                                    <td>
                                                        <a href="product/{{product.url}}"
                                                        style="font-family:'Libre Franklin', sans-serif;
                                                         font-size: 20px;
                                                        font-weight: 20;"> {{product.name}}</a>
                                                        <div style="font-family:'Libre Franklin', sans-serif;
                                                         font-size: 20px;
                                                        font-weight: 20;" [innerHTML]="product.details"></div>
                                                        <div class="small text-secondary"
                                                        style="font-family:'Libre Franklin', sans-serif;
                                                        font-size: 20px;
                                                        font-weight: 20;">Quantity:
                                                            <span 
                                                            style="font-family:'Libre Franklin', sans-serif;
                                                            font-size: 20px;
                                                            font-weight: 20;"
                                                            class="qCheckout">{{product.quantity}}</span>
                                                        </div>
                                                        <div style="font-family:'Libre Franklin', sans-serif;
                                                            font-size: 20px;
                                                            font-weight: 20;"
                                                        class="d-none sCheckout">{{product.shipping}}</div>
                                                    </td>

                                                    <td class="text-right ps-product">
                                                        <div style="font-family:'Libre Franklin', sans-serif;; 
                                                            font-size: 20px;
                                                            font-weight: 20;"
                                                        class="d-none pCheckout" [innerHTML]="product.price"></div>
                                                        <div style="font-family:'Libre Franklin', sans-serif;
                                                            font-size: 20px;
                                                            font-weight: 20;"
                                                        class="subTotalPriceCheckout"><div class="spinner-border"></div></div>

                                                    </td>

                                                {{ lastIndex ? callback() : ""}}

                                                </tr>  

                                            </tbody>

                                        </table>
                                        
                                        <div
                                        style="font-family:'Libre Franklin', sans-serif; 
                                        font-size: 20px;
                                        font-weight: 20;" [innerHTML]="totalP"></div>

                                    </div>

                                </div>

                                <hr class="py-3">

                                <h3 style="font-family:'Libre Franklin', sans-serif; font-size: 27px;
                                font-weight: 450;"
                                class="ps-form__heading">Select Pay Method</h3>

                                <div style="font-family:'Libre Franklin', sans-serif; font-size: 27px;
                                font-weight: 450;"
                                *ngIf="f.submitted && f.controls['paymentMethod'].errors"
                                class="text-danger">Please select pay method.</div>

                                <div class="form-group">

                                    <div class="ps-radio">

                                        <input 
                                        class="form-control" 
                                        type="radio" 
                                        id="pay-paypal" 
                                        name="paymentMethod" 
                                        [(ngModel)]="paymentMethod"
                                        value="paypal" 
                                        required>

                                        <label for="pay-paypal">Pay with Paypal?  <span><img src="{{path}}img/payment-method/paypal.jpg" class="w-50"></span></label>

                                    </div>

                                </div>

                                <div class="form-group" style="display:none;">

                                    <div class="ps-radio">

                                        <input 
                                        class="form-control" 
                                        type="radio" 
                                        id="pay-payu" 
                                        name="paymentMethod" 
                                        [(ngModel)]="paymentMethod" 
                                        value="payu"
                                        required>

                                        <label for="pay-payu">Pay with Payu? <span><img src="{{path}}img/payment-method/payu.jpg" class="w-50"></span></label>

                                    </div>

                                </div>

                                <div class="form-group" style="display:none;">

                                    <div class="ps-radio">

                                        <input 
                                        class="form-control" 
                                        type="radio" 
                                        id="pay-mercadopago" 
                                        name="paymentMethod" 
                                        [(ngModel)]="paymentMethod"
                                        value="mercado-pago"
                                        required>

                                        <label for="pay-mercadopago">Pay with Mercado Pago? <span><img src="{{path}}img/payment-method/mercado_pago.jpg" class="w-50"></span></label>

                                    </div>

                                </div>

                                <!-- <button type="submit" class="ps-btn ps-btn--fullwidth">Proceed to checkout</button> -->
                                <button type="submit" style="background: transparent;
                                border: transparent;
                                margin-top: -17%;">
                                    <a class="btn btn-sm animated-button thar-three">
                                        Proceed to checkout
                                    </a>      
                                </button>

                            </div>

                        </div>

                    </div>

                </div>

            </form>

        </div>

    </div>

</div>

<style>
    /* Global Button Styles */
    a.animated-button:link, a.animated-button:visited {
        position: relative;
        display: block;
        margin: 30px auto 0;
        padding: 14px 15px;
        color: #fff;
        font-size:14px;
        font-weight: bold;
        text-align: center;
        text-decoration: none;
        text-transform: uppercase;
        overflow: hidden;
        letter-spacing: .08em;
        border-radius: 0;
        text-shadow: 0 0 1px rgba(0, 0, 0, 0.2), 0 1px 0 rgba(0, 0, 0, 0.2);
        -webkit-transition: all 1s ease;
        -moz-transition: all 1s ease;
        -o-transition: all 1s ease;
        transition: all 1s ease;
    }
    a.animated-button:link:after, a.animated-button:visited:after {
        content: "";
        position: absolute;
        height: 0%;
        left: 50%;
        top: 50%;
        width: 50%;
        z-index: -1;
        -webkit-transition: all 0.75s ease 0s;
        -moz-transition: all 0.75s ease 0s;
        -o-transition: all 0.75s ease 0s;
        transition: all 0.75s ease 0s;
    }
    a.animated-button:link:hover, a.animated-button:visited:hover {
        color: #FFF;
        text-shadow: none;
    }
    a.animated-button:link:hover:after, a.animated-button:visited:hover:after {
        height: 50%;
    }
    a.animated-button:link, a.animated-button:visited {
        position: relative;
        display: block;
        margin: 30px auto 0;
        padding: 14px 15px;
        color: #fff;
        font-size:14px;
        border-radius: 0;
        font-weight: bold;
        text-align: center;
        text-decoration: none;
        text-transform: uppercase;
        overflow: hidden;
        letter-spacing: .08em;
        text-shadow: 0 0 1px rgba(0, 0, 0, 0.2), 0 1px 0 rgba(0, 0, 0, 0.2);
        -webkit-transition: all 1s ease;
        -moz-transition: all 1s ease;
        -o-transition: all 1s ease;
        transition: all 1s ease;
    }

    a.animated-button.thar-three {
        font-size: inherit;
        /*padding-left: 7%;
        padding-right: 7%;
        padding-top: 1%;
        padding-bottom: 1%;
        margin-top: 93px;*/
        background-color: white;
        color: black;
        cursor: pointer;
        display: flow-root;
        /*display: block;*/
        /*position: absolute;*/
        border: 2px solid black;
        transition: all 0.4s cubic-bezier(0.42, 0, 0.58, 1);
    0s;
    }
    a.animated-button.thar-three:hover {
        /*color: #000 !important;*/
        color: white !important;
        background-color: transparent;
        text-shadow: nthree;
    }
    a.animated-button.thar-three:hover:before {
        left: 0%;
        right: auto;
        width: 100%;
    }
    a.animated-button.thar-three:before {
        display: block;
        position: absolute;
        top: 0px;
        right: 0px;
        height: 100%;
        width: 0px;
        z-index: -1;
        content: '';
        color: #000 !important;
        background: #000000; 
        transition: all 0.4s cubic-bezier(0.42, 0, 0.58, 1);0s;
    }
</style>